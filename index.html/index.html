<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Capacita SM - Acceso</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
html, body {margin: 0; padding: 0; width: 100%; height: 100%; font-family: Arial, sans-serif;background: url('fondo.png') no-repeat center center fixed; background-size: cover;}
@media (max-width: 768px) { body { background-attachment: scroll; } }
#menuPrincipal, .seccion {background: rgba(255,255,255,0.95); padding: 20px; border-radius: 10px;margin: 20px auto; max-width: 300px; box-shadow: 0 2px 5px rgba(0,0,0,0.3);text-align: center;}
#menuPrincipal button, .boton-volver {width: 100%; margin: 10px 0; padding: 12px; font-size: 16px;background: #4C7C46; color: white; border: none; border-radius: 6px; cursor: pointer;}
#menuPrincipal button:hover, .boton-volver:hover { background: #3B6138; }
#mosaicoCursos { display: none; max-width: 1200px; margin: 20px auto; padding: 10px; }
#tituloCursos { background: white; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
#gridCursos { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
.curso-tile { background: #fff; padding: 20px; text-align: center; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; display: flex; flex-direction: column; align-items: center; }
.curso-tile:hover { transform: translateY(-5px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); background: #A3C95A; color: white; }
button { background: #4C7C46; color: white; border: none; padding: 10px 20px; margin-top: 30px; border-radius: 6px; cursor: pointer; }
button:hover { background: #3B6138; }
#panelEmpresa { display: none; height: 100vh; width: 100%; }
#menuLateral { width: 250px; background: rgba(255,255,255,0.95); padding: 20px;box-shadow: 2px 0 5px rgba(0,0,0,0.3); display: flex; flex-direction: column;}
#contenidoEmpresa { flex-grow: 1; padding: 30px; background: rgba(255,255,255,0.9); margin: 20px; border-radius: 10px; overflow-y: auto; }
table { width: 100%; border-collapse: collapse; }
table th, table td { padding: 8px; text-align: left; border: 1px solid #ddd; }
table td input { width: 100%; border: none; background: transparent; }
</style>
</head>
<body>
<section id="menuPrincipal">    
    <h2>ACCESO</h2>
    <button onclick="mostrarTrabajador()">Trabajadores</button>
    <button onclick="mostrarLoginEmpresa()">Empresas</button>
</section>
<section id="seccionTrabajador" class="seccion" style="display:none">
    <h2>Ingrese su RUT</h2>
    <input type="text" id="rutAcceso" placeholder="RUT">
    <button onclick="accederTrabajador()">Entrar</button>
    <button class="boton-volver" onclick="volverMenu()">Volver</button>
</section>
   <section id="mosaicoCursos" class="seccion" style="display:none; max-width: 100%; background: transparent; box-shadow: none;">
    <h2 style="background: rgba(255,255,255,0.95); padding: 15px; border-radius: 10px; display: inline-block;">Capacitaciones </h2>
    
    <div id="gridCursos" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin: 20px;">
        
        <div class="curso-tile" onclick="verCurso('Prevención de Incendios y Uso de Extintores')">Prevención de Incendios y Uso de Extintores</div>
        <div class="curso-tile" onclick="verCurso('EPP - Uso y Mantención')">EPP - Uso y Mantención</div>
        <div class="curso-tile" onclick="verCurso('Procedimientos de Trabajo Seguro')">Procedimientos de Trabajo Seguro</div>
        <div class="curso-tile" onclick="verCurso('Manejo Seguro de Herramientas')">Manejo Seguro de Herramientas</div>
        <div class="curso-tile" onclick="verCurso('Manejo Seguro de Material Cortopunzante')">Manejo Seguro de Material Cortopunzante</div>
        <div class="curso-tile" onclick="verCurso('Prevención de Riesgos Eléctricos')">Prevención de Riesgos Eléctricos</div>
        <div class="curso-tile" onclick="verCurso('Manejo Manual de Cargas')">Manejo Manual de Cargas</div>
        <div class="curso-tile" onclick="verCurso('Prácticas Seguras en Labores de Aseo')">Prácticas Seguras en Labores de Aseo</div>
        <div class="curso-tile" onclick="verCurso('Manipulación Higiénica de Alimentos')">Manipulación Higiénica de Alimentos</div>
        <div class="curso-tile" onclick="verCurso('Seguridad en Máquinas Panadería')">Seguridad en Máquinas Panadería</div>
        <div class="curso-tile" onclick="verCurso('Comportamientos Seguros en Cocinas y Restaurant')">Comportamientos Seguros en Cocinas y Restaurant</div>
        <div class="curso-tile" onclick="verCurso('Trayecto Seguro')">Trayecto Seguro</div>
        <div class="curso-tile" onclick="verCurso('Prevención y Respuesta a Incendios')">Prevención y Respuesta a Incendios</div>
        <div class="curso-tile" onclick="verCurso('Seguridad Frente a Incendios')">Seguridad Frente a Incendios</div>
        <div class="curso-tile" onclick="verCurso('Gestión de Riesgos de Desastres')">Gestión de Riesgos de Desastres</div>
        <div class="curso-tile" onclick="verCurso('Protocolo PREXOR - Exposición a Ruido')">Protocolo PREXOR - Exposición a Ruido</div>
        <div class="curso-tile" onclick="verCurso('Manejo Post Exposición a Sangre')">Manejo Post Exposición a Sangre</div>
        <div class="curso-tile" onclick="verCurso('Prevención Acoso Laboral y Sexual')">Prevención Acoso Laboral y Sexual</div>
        <div class="curso-tile" onclick="verCurso('Violencia y Acoso en el Trabajo')">Violencia y Acoso en el Trabajo</div>
        <div class="curso-tile" onclick="verCurso('Primeros Auxilios Psicológicos')">Primeros Auxilios Psicológicos</div>
        <div class="curso-tile" onclick="verCurso('Seguridad en Asaltos - Comercio')">Seguridad en Asaltos - Comercio</div>
        <div class="curso-tile" onclick="verCurso('Seguridad para Reponedores Fiambrerías')">Seguridad para Reponedores Fiambrerías</div>
    
    <button class="boton-volver" onclick="volverTrabajador()">Volver</button>
</section>

<section id="moduloCurso" class="seccion" style="display:none">
  <h2 style="text-align:center; padding: 20px;">Curso: Prevención de Incendios y Uso de Extintores</h2>
  <div id="contenedorModulos"></div>
</section>

<script>
const modulos = [
  { tipo: 'texto', contenido: '<strong>¿Qué aprenderemos?</strong><br>Los fundamentos básicos de la prevención de incendios.<br>Cómo identificar los métodos de prevención y extinción de incendios.<br>Las técnicas de extinción mediante el uso de extintores.<br>Los distintos tipos de extintores, sus agentes, rotulación y mantenimiento.' },
  { tipo: 'texto', contenido: '<strong>1. Declaración de Igualdad de Género</strong><br>Durante este curso usaremos un lenguaje no sexista. Sin embargo, emplearemos el masculino genérico por claridad.' },
  { tipo: 'texto', contenido: '<strong>2. ¿Qué es el fuego?</strong><br>Es una reacción química. Es un proceso exotérmico. Es una manifestación visual de la combustión.<br><br><strong>¿Qué es un incendio?</strong><br>Fuego de grandes proporciones que destruye cosas.' },
  { tipo: 'eval', pregunta: '¿Cuál es la definición correcta de fuego?', opciones: ['Un fuego de grandes proporciones que arde de forma fortuita o provocada.', 'Reacción química de oxidación violenta de una materia combustible.', 'Suceso no deseado por la ocurrencia de un fuego no controlado que se propaga.', 'Inflamación cuando entran en contacto combustibles sólidos, líquidos y gaseosos.'], correcta: 1 },
  { tipo: 'texto', contenido: '<strong>3. Normativa Aplicable</strong><br>Decreto Supremo N°594:<br>Artículos 44, 45, 47, 48, 49.' },
  { tipo: 'eval', pregunta: 'Según la normativa, ¿qué medida debe implementarse en todo lugar de trabajo para la prevención de incendios?', opciones: ['Inspeccionar las instalaciones a través de un programa preestablecido.', 'Contar con extintores de incendio adecuados.', 'Implementar medidas para controlar las cargas combustibles y las fuentes de calor.', 'Todas son correctas.'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>4. Normas Chilenas Aplicables</strong><br>NCh 2111, NCh 1429, NCh 933, NCh 1433, NCh 934.' },
  { tipo: 'eval', pregunta: 'La norma chilena NCh1429.Of1992 Mod.1995 está referida a:', opciones: ['Ubicación y señalización de los extintores', 'Prevención de incendios', 'Protección contra incendios', 'Extintores portátiles'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>5. Triángulo del Fuego</strong><br>Comburente, calor, combustible. Ejemplos de cada uno.' },
  { tipo: 'eval', pregunta: '¿Qué es el comburente en el triángulo del fuego?', opciones: ['Un cuerpo sólido, líquido o gaseoso susceptible de arder.', 'Elemento que no arde, pero hace arder un combustible.', 'Una sustancia líquida, sólida o gaseosa que apaga el fuego.', 'Una reacción química entre un cuerpo combustible y un comburente.'], correcta: 1 },
  { tipo: 'texto', contenido: '<strong>6. Tetraedro del Fuego y Transferencia de Calor</strong><br>Se suma la reacción en cadena. Formas: conducción, radiación y convección.' },
  { tipo: 'eval', pregunta: '¿Cuál de las alternativas se identifica con transferencia del calor que ocurre cuando dos cuerpos están en contacto?', opciones: ['Compatibilidad', 'Radiación', 'Conducción', 'Convección'], correcta: 2 },
  { tipo: 'texto', contenido: '<strong>12. Principales Causas de Incendio (Parte 1)</strong><br>Conexiones eléctricas deficientes: enchufes no certificados, cables deteriorados, cortocircuitos, líneas recargadas.' },
  { tipo: 'eval', pregunta: '¿Cuál de las siguientes alternativas se relaciona como una de las principales causas de incendio asociada a conexiones eléctricas deficientes?', opciones: ['Exceso de basura en el área de trabajo.', 'Enchufes no certificados y cables deteriorados.', 'Almacenaje inadecuado de materiales inflamables.', 'Fumar en lugares prohibidos.'], correcta: 1 },
  { tipo: 'texto', contenido: '<strong>13. Principales Causas de Incendio (Parte 2)</strong><br>Mal manejo de cilindros de gas: alterar conexiones, manipulación incorrecta.' },
  { tipo: 'eval', pregunta: '¿Cuál de las siguientes causas implica el mal manejo de cilindros de gas?', opciones: ['Conexiones eléctricas deficientes.', 'Manejo inadecuado de materiales inflamables.', 'Exposición de materiales a fuentes de calor.', 'Alterar conexiones de gas y manipulación de cilindros a gas.'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>14. Métodos de Extinción del Fuego (Parte 1)</strong><br>Por enfriamiento: disminuir el calor (ej: agua sobre madera).' },
  { tipo: 'eval', pregunta: 'Es uno de los métodos de extinción mediante el uso de agua o su mezcla con aditivos, se refiere a:', opciones: ['Extinción por sofocación.', 'Extinción por enfriamiento.', 'Extinción por aislación.', 'Extinción por inhibición.'], correcta: 1 },
  { tipo: 'texto', contenido: '<strong>15. Métodos de Extinción del Fuego (Parte 2)</strong><br>Por sofocación: eliminación del oxígeno (ej: tapar sartén ardiendo).' },
  { tipo: 'eval', pregunta: '¿Cuál de los siguientes métodos de extinción actúa bajando la concentración o eliminación del oxígeno?', opciones: ['Por enfriamiento.', 'Por aislación del combustible.', 'Por inhibición de la reacción en cadena.', 'Por sofocación.'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>16. Prevención de Incendios</strong><br>Medidas generales: no fumar en zonas riesgosas, no sobrecargar tomas, mantener orden, no bloquear salidas, etc.' },
  { tipo: 'eval', pregunta: '¿Cuál de las siguientes medidas se recomiendan para prevenir incendios en los centros de trabajo?', opciones: ['Mantener orden y aseo en los centros de trabajo.', 'Encender fuegos y fumar en zonas de alto riesgo de incendio.', 'Obstaculizar las salidas de emergencia.', 'Sobrecargar.'], correcta: 0 },
  { tipo: 'texto', contenido: '<strong>18-19. Tipos de Extintores</strong><br>Portátiles, por agente extintor: polvo seco, CO₂, agua, etc.' },
  { tipo: 'eval', pregunta: '¿Cuál de los siguientes agentes se utiliza en un extintor de polvo seco?', opciones: ['Agua.', 'Cloruro de calcio.', 'Dióxido de carbono (CO₂).', 'Bicarbonato de potasio y sodio.'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>20. Partes del Extintor y Uso</strong><br>Pasos para uso seguro del extintor.' },
  { tipo: 'texto', contenido: '<strong>21. Instrucciones Generales + Imagen</strong><br>(Aquí se puede insertar una imagen ilustrativa si se desea)' },
  { tipo: 'texto', contenido: '<strong>22. Norma Chilena N°1433</strong><br>Altura mínima: 20 cm. Altura máxima: 1,30 m desde el suelo.' },
  { tipo: 'eval', pregunta: 'Según la Norma Chilena N° 1433, ¿A qué altura mínima se deben colocar los extintores?', opciones: ['1 metro.', '50 cm.', '1.30 metros.', '20 cm.'], correcta: 3 },
  { tipo: 'texto', contenido: '<strong>23. Mantención y Rotulación</strong><br>DS N° 594 Art. 51, requisitos de rotulación: etiqueta visible, tipo de agente, clase de fuego, pictogramas.' },
  { tipo: 'eval', pregunta: '¿Cuál de las siguientes normas establece los requisitos de rotulación que deben cumplir los extintores portátiles?', opciones: ['Decreto N° 369.', 'Norma Chilena N° 2111.', 'Norma Chilena N° 1430.', 'Decreto supremo N° 594.'], correcta: 2 },
  { tipo: 'final', mensaje: 'Has aprobado el curso: Prevención de Incendios y Uso de Extintores.' }
];

let actual = 0;
const contenedor = document.getElementById('contenedorModulos');

function mostrarModulo(index) {
  contenedor.innerHTML = '';
  const m = modulos[index];
  const div = document.createElement('div');
  div.className = 'modulo active';

  if (m.tipo === 'texto') {
    div.innerHTML = `<p>${m.contenido}</p>`;
  } else if (m.tipo === 'eval') {
    div.innerHTML = `<div class='pregunta'><strong>${m.pregunta}</strong></div>`;
    m.opciones.forEach((opt, i) => {
      const b = document.createElement('button');
      b.textContent = opt;
      b.onclick = () => {
        if (i === m.correcta) {
          alert('Respuesta correcta');
          avanzar();
        } else {
          alert('Respuesta incorrecta. Intente nuevamente.');
        }
      };
      div.appendChild(b);
    });
  } else if (m.tipo === 'final') {
    div.innerHTML = `<p>${m.mensaje}</p>`;
    const b = document.createElement('button');
    b.textContent = 'Generar certificado';
    b.onclick = generarCertificado;
    div.appendChild(b);
  }

  if (index > 0 && m.tipo !== 'eval') {
    const b = document.createElement('button');
    b.textContent = 'Atrás';
    b.onclick = () => avanzar(-1);
    div.appendChild(b);
  }

  if (m.tipo === 'texto' && index < modulos.length - 1) {
    const b = document.createElement('button');
    b.textContent = 'Siguiente';
    b.onclick = () => avanzar();
    div.appendChild(b);
  }

  contenedor.appendChild(div);
}

function avanzar(delta = 1) {
  actual += delta;
  mostrarModulo(actual);
}

function generarCertificado() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text('Certificado de Aprobación', 20, 30);
  doc.setFontSize(12);
  doc.text('Has aprobado el curso: Prevención de Incendios y Uso de Extintores.', 20, 50);
  doc.save('certificado_prevencion.pdf');
}

mostrarModulo(actual);
</script>
<section id="loginEmpresa" class="seccion" style="display:none">
    <h2>Acceso Empresas</h2>
    <input type="text" id="usuarioEmpresa" placeholder="Usuario">
    <input type="password" id="claveEmpresa" placeholder="Contraseña">
    <button onclick="accederEmpresa()">Entrar</button>
    <button class="boton-volver" onclick="volverMenu()">Volver</button>
</section>
<div id="panelEmpresa">
    <div id="menuLateral">
        <h3>Empresa XYZ</h3>
        <p>RUT: 12.345.678-9</p>
        <button onclick="mostrarSeccionEmpresa()">Gestión de Trabajadores</button>
        <button onclick="exportarTrabajadores()">Exportar</button>
        <button onclick="document.getElementById('importador').click()">Importar</button>
        <input type="file" id="importador" accept=".csv,.xlsx" style="display:none" onchange="importarTrabajadores(this)">
        <button onclick="volverMenu()">Cerrar Sesión</button>
    </div>
    <div id="contenidoEmpresa">
        <h2>Listado de Trabajadores</h2>
        <input type="text" id="nombre"><input type="text" id="rut"><input type="text" id="cargo">
        <input type="text" id="centro"><input type="date" id="fechaIngreso">
        <button onclick="registrarTrabajador()">Agregar</button>
        <table><thead><tr><th>RUT</th><th>Nombre</th><th>Cargo</th><th>Centro</th><th>Fecha</th><th>Eliminar</th></tr></thead>
        <tbody id="tablaTrabajadores"></tbody></table>
    </div>
</div>
<script>
const usuarioValido = "empresa", claveValida = "1234";
let trabajadores = JSON.parse(localStorage.getItem("trabajadores")) || [];
function ocultarTodo(){document.querySelectorAll(".seccion").forEach(s=>s.style.display="none"); document.getElementById('menuPrincipal').style.display="none"; document.getElementById('panelEmpresa').style.display="none";}
function volverMenu(){ocultarTodo();document.getElementById('menuPrincipal').style.display='block';}
function mostrarTrabajador(){ocultarTodo();document.getElementById('seccionTrabajador').style.display='block';}
function mostrarLoginEmpresa(){ocultarTodo();document.getElementById('loginEmpresa').style.display='block';}
function accederTrabajador(){const r=document.getElementById('rutAcceso').value.trim();if(trabajadores.find(t=>t.rut===r)){ocultarTodo();document.getElementById('mosaicoCursos').style.display='block';}else{alert("RUT no registrado");}}
function volverTrabajador(){mostrarTrabajador();}
function verCurso(nombre) { ocultarTodo();document.getElementById('moduloCurso').style.display = 'block';document.getElementById('tituloCurso').textContent = nombre;}
function volverCursos(){document.getElementById('mosaicoCursos').style.display='block';}
function volverModulo(){document.getElementById('moduloCurso').style.display='block';}
function finalizarModulo(){const p1=document.getElementById('p1').value.trim().toLowerCase(),p2=document.getElementById('p2').value.trim().toLowerCase(),p3=document.getElementById('p3').value.trim().toLowerCase();if(p1=="verdadero"&&p2=="falso"&&p3=="verdadero"){ocultarTodo();document.getElementById('evaluacionFinal').style.display='block';cargarEvaluacionFinal();}else{alert("Respuestas incorrectas");}}
function cargarEvaluacionFinal(){const c=document.getElementById('preguntasFinal');c.innerHTML="";[["¿Extintores visibles?","si"],["¿No necesitan mantención?","no"],["¿Apuntar a base del fuego?","si"]].forEach((p,i)=>{c.innerHTML+=`${p[0]}<br><input id='final${i}'><br>`;});}
function finalizarEvaluacion(){let c=0;[["¿Extintores visibles?","si"],["¿No necesitan mantención?","no"],["¿Apuntar a base del fuego?","si"]].forEach((p,i)=>{if(document.getElementById(`final${i}`).value.trim().toLowerCase()===p[1])c++;});document.getElementById('resultadoFinal').textContent=c>=3?"¡Aprobado!":"Debe repetir";}
function accederEmpresa(){if(document.getElementById('usuarioEmpresa').value.trim()===usuarioValido&&document.getElementById('claveEmpresa').value.trim()===claveValida){ocultarTodo();document.getElementById('panelEmpresa').style.display='flex';actualizarTabla();}else{alert("Credenciales incorrectas");}}
function mostrarSeccionEmpresa(){actualizarTabla();}
function registrarTrabajador(){const n=document.getElementById('nombre').value.trim(),r=document.getElementById('rut').value.trim(),c=document.getElementById('cargo').value.trim(),ce=document.getElementById('centro').value.trim(),f=document.getElementById('fechaIngreso').value;if(n&&r&&c&&ce&&f){trabajadores.push({nombre:n,rut:r,cargo:c,centro:ce,fechaIngreso:f});localStorage.setItem("trabajadores",JSON.stringify(trabajadores));actualizarTabla();}else{alert("Complete todos los campos");}}
function actualizarTabla(){const t=document.getElementById('tablaTrabajadores');t.innerHTML="";trabajadores.forEach((tr,i)=>{t.innerHTML+=`<tr><td>${tr.rut}</td><td>${tr.nombre}</td><td>${tr.cargo}</td><td>${tr.centro}</td><td>${tr.fechaIngreso}</td><td><button onclick='eliminarTrabajador(${i})'>Eliminar</button></td></tr>`;});}
function eliminarTrabajador(i){if(confirm("Eliminar trabajador?")){trabajadores.splice(i,1);localStorage.setItem("trabajadores",JSON.stringify(trabajadores));actualizarTabla();}}
function exportarTrabajadores(){let c="RUT,Nombre,Cargo,Centro,Fecha Ingreso\n";trabajadores.forEach(t=>{c+=`${t.rut},${t.nombre},${t.cargo},${t.centro},${t.fechaIngreso}\n`;});const b=new Blob([c],{type:'text/csv'}),l=document.createElement("a");l.href=URL.createObjectURL(b);l.download="trabajadores.csv";l.click();}
function importarTrabajadores(inp){const f=inp.files[0];if(!f)return;const r=new FileReader();r.onload=e=>{if(f.name.endsWith(".csv")){e.target.result.split('\n').forEach(l=>{const[d1,d2,d3,d4,d5]=l.split(',');if(d1&&d2&&d3&&d4&&d5)trabajadores.push({rut:d1,nombre:d2,cargo:d3,centro:d4,fechaIngreso:d5});});}else{const wb=XLSX.read(e.target.result,{type:'binary'});XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]]).forEach(d=>{if(d.RUT&&d.Nombre)trabajadores.push({rut:d.RUT,nombre:d.Nombre,cargo:d.Cargo,centro:d.Centro,fechaIngreso:d['Fecha Ingreso']});});}localStorage.setItem("trabajadores",JSON.stringify(trabajadores));actualizarTabla();};if(f.name.endsWith(".xlsx"))r.readAsBinaryString(f);else r.readAsText(f);inp.value="";}
</script>
</body>
</html>


</body>
</html>


